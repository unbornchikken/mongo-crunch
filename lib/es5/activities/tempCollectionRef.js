"use strict";
"use strict";
var wf4node = require("../../../deps/workflow-4-node");
var util = require("util");
var Composite = wf4node.activities.Composite;
var Guid = require("guid");
var path = require("path");
function TempCollectionRef() {
  Composite.call(this);
  this.namePrefix = null;
  this.deleteOnExit = true;
  this.indexes = null;
  this.clearBeforeUse = true;
}
util.inherits(TempCollectionRef, Composite);
TempCollectionRef.prototype.createImplementation = function() {
  var name = this.namePrefix;
  name = name ? name + "_tmp_" : "tmp_";
  name += Guid.create().toString();
  return {
    "@require": path.join(__dirname, "collectionRef"),
    collectionRef: {
      name: name,
      indexes: this.indexes,
      clearBeforeUse: this.clearBeforeUse,
      deleteOnExit: this.deleteOnExit,
      mustExists: false
    }
  };
};
module.exports = TempCollectionRef;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInRlbXBDb2xsZWN0aW9uUmVmLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0FBQUEsV0FBVyxDQUFDO0FBRVosQUFBSSxFQUFBLENBQUEsT0FBTSxFQUFJLENBQUEsT0FBTSxBQUFDLENBQUMsK0JBQThCLENBQUMsQ0FBQztBQUN0RCxBQUFJLEVBQUEsQ0FBQSxJQUFHLEVBQUksQ0FBQSxPQUFNLEFBQUMsQ0FBQyxNQUFLLENBQUMsQ0FBQztBQUMxQixBQUFJLEVBQUEsQ0FBQSxTQUFRLEVBQUksQ0FBQSxPQUFNLFdBQVcsVUFBVSxDQUFDO0FBQzVDLEFBQUksRUFBQSxDQUFBLElBQUcsRUFBSSxDQUFBLE9BQU0sQUFBQyxDQUFDLE1BQUssQ0FBQyxDQUFDO0FBQzFCLEFBQUksRUFBQSxDQUFBLElBQUcsRUFBSSxDQUFBLE9BQU0sQUFBQyxDQUFDLE1BQUssQ0FBQyxDQUFDO0FBRTFCLE9BQVMsa0JBQWdCLENBQUUsQUFBRCxDQUFHO0FBQ3pCLFVBQVEsS0FBSyxBQUFDLENBQUMsSUFBRyxDQUFDLENBQUM7QUFFcEIsS0FBRyxXQUFXLEVBQUksS0FBRyxDQUFDO0FBQ3RCLEtBQUcsYUFBYSxFQUFJLEtBQUcsQ0FBQztBQUN4QixLQUFHLFFBQVEsRUFBSSxLQUFHLENBQUM7QUFDbkIsS0FBRyxlQUFlLEVBQUksS0FBRyxDQUFDO0FBQzlCO0FBQUEsQUFFQSxHQUFHLFNBQVMsQUFBQyxDQUFDLGlCQUFnQixDQUFHLFVBQVEsQ0FBQyxDQUFDO0FBRTNDLGdCQUFnQixVQUFVLHFCQUFxQixFQUFJLFVBQVMsQUFBRCxDQUFHO0FBQzFELEFBQUksSUFBQSxDQUFBLElBQUcsRUFBSSxDQUFBLElBQUcsV0FBVyxDQUFDO0FBQzFCLEtBQUcsRUFBSSxDQUFBLElBQUcsRUFBSSxDQUFBLElBQUcsRUFBSSxRQUFNLENBQUEsQ0FBSSxPQUFLLENBQUM7QUFDckMsS0FBRyxHQUFLLENBQUEsSUFBRyxPQUFPLEFBQUMsRUFBQyxTQUFTLEFBQUMsRUFBQyxDQUFDO0FBRWhDLE9BQU87QUFDSCxhQUFTLENBQUcsQ0FBQSxJQUFHLEtBQUssQUFBQyxDQUFDLFNBQVEsQ0FBRyxnQkFBYyxDQUFDO0FBQ2hELGdCQUFZLENBQUc7QUFDWCxTQUFHLENBQUcsS0FBRztBQUNULFlBQU0sQ0FBRyxDQUFBLElBQUcsUUFBUTtBQUNwQixtQkFBYSxDQUFHLENBQUEsSUFBRyxlQUFlO0FBQ2xDLGlCQUFXLENBQUcsQ0FBQSxJQUFHLGFBQWE7QUFDOUIsZUFBUyxDQUFHLE1BQUk7QUFBQSxJQUNwQjtBQUFBLEVBQ0osQ0FBQztBQUNMLENBQUM7QUFFRCxLQUFLLFFBQVEsRUFBSSxrQkFBZ0IsQ0FBQztBQUFBIiwiZmlsZSI6ImFjdGl2aXRpZXMvdGVtcENvbGxlY3Rpb25SZWYuanMiLCJzb3VyY2VSb290IjoibGliL2VzNiIsInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xyXG5cclxubGV0IHdmNG5vZGUgPSByZXF1aXJlKFwiLi4vLi4vLi4vZGVwcy93b3JrZmxvdy00LW5vZGVcIik7XHJcbmxldCB1dGlsID0gcmVxdWlyZShcInV0aWxcIik7XHJcbmxldCBDb21wb3NpdGUgPSB3ZjRub2RlLmFjdGl2aXRpZXMuQ29tcG9zaXRlO1xyXG5sZXQgR3VpZCA9IHJlcXVpcmUoXCJndWlkXCIpO1xyXG5sZXQgcGF0aCA9IHJlcXVpcmUoXCJwYXRoXCIpO1xyXG5cclxuZnVuY3Rpb24gVGVtcENvbGxlY3Rpb25SZWYoKSB7XHJcbiAgICBDb21wb3NpdGUuY2FsbCh0aGlzKTtcclxuXHJcbiAgICB0aGlzLm5hbWVQcmVmaXggPSBudWxsO1xyXG4gICAgdGhpcy5kZWxldGVPbkV4aXQgPSB0cnVlO1xyXG4gICAgdGhpcy5pbmRleGVzID0gbnVsbDtcclxuICAgIHRoaXMuY2xlYXJCZWZvcmVVc2UgPSB0cnVlO1xyXG59XHJcblxyXG51dGlsLmluaGVyaXRzKFRlbXBDb2xsZWN0aW9uUmVmLCBDb21wb3NpdGUpO1xyXG5cclxuVGVtcENvbGxlY3Rpb25SZWYucHJvdG90eXBlLmNyZWF0ZUltcGxlbWVudGF0aW9uID0gZnVuY3Rpb24oKSB7XHJcbiAgICBsZXQgbmFtZSA9IHRoaXMubmFtZVByZWZpeDtcclxuICAgIG5hbWUgPSBuYW1lID8gbmFtZSArIFwiX3RtcF9cIiA6IFwidG1wX1wiO1xyXG4gICAgbmFtZSArPSBHdWlkLmNyZWF0ZSgpLnRvU3RyaW5nKCk7XHJcblxyXG4gICAgcmV0dXJuIHtcclxuICAgICAgICBcIkByZXF1aXJlXCI6IHBhdGguam9pbihfX2Rpcm5hbWUsIFwiY29sbGVjdGlvblJlZlwiKSxcclxuICAgICAgICBjb2xsZWN0aW9uUmVmOiB7XHJcbiAgICAgICAgICAgIG5hbWU6IG5hbWUsXHJcbiAgICAgICAgICAgIGluZGV4ZXM6IHRoaXMuaW5kZXhlcyxcclxuICAgICAgICAgICAgY2xlYXJCZWZvcmVVc2U6IHRoaXMuY2xlYXJCZWZvcmVVc2UsXHJcbiAgICAgICAgICAgIGRlbGV0ZU9uRXhpdDogdGhpcy5kZWxldGVPbkV4aXQsXHJcbiAgICAgICAgICAgIG11c3RFeGlzdHM6IGZhbHNlXHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxufTtcclxuXHJcbm1vZHVsZS5leHBvcnRzID0gVGVtcENvbGxlY3Rpb25SZWY7Il19
