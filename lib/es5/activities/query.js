"use strict";
"use strict";
var wf4node = require("workflow-4-node");
var CollectionOp = require("./collectionOp");
var util = require("util");
var Activity = wf4node.activities.Activity;
function Query() {
  CollectionOp.call(this);
  this.query = null;
  this.options = null;
  this.nonScopedProperties.add("doQuery");
}
util.inherits(Query, CollectionOp);
Object.defineProperties(Query.prototype, {collectionify: {
    value: true,
    enumerable: false
  }});
Query.prototype.doWork = function(callContext) {
  callContext.schedule([this.query, this.options], "_parsGot");
};
Query.prototype._parsGot = function(callContext, reason, result) {
  if (reason === Activity.states.complete) {
    callContext.activity.doQuery.call(this, callContext, result[0], result[1] || {});
  } else {
    callContext.end(reason, result);
  }
};
Query.prototype.doQuery = function(callContext, query, options) {
  callContext.fail(new Error("Not implemented!"));
};
module.exports = Query;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInF1ZXJ5LmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0FBQUEsV0FBVyxDQUFDO0FBRVosQUFBSSxFQUFBLENBQUEsT0FBTSxFQUFJLENBQUEsT0FBTSxBQUFDLENBQUMsaUJBQWdCLENBQUMsQ0FBQztBQUN4QyxBQUFJLEVBQUEsQ0FBQSxZQUFXLEVBQUksQ0FBQSxPQUFNLEFBQUMsQ0FBQyxnQkFBZSxDQUFDLENBQUM7QUFDNUMsQUFBSSxFQUFBLENBQUEsSUFBRyxFQUFJLENBQUEsT0FBTSxBQUFDLENBQUMsTUFBSyxDQUFDLENBQUM7QUFDMUIsQUFBSSxFQUFBLENBQUEsUUFBTyxFQUFJLENBQUEsT0FBTSxXQUFXLFNBQVMsQ0FBQztBQUUxQyxPQUFTLE1BQUksQ0FBRSxBQUFELENBQUc7QUFDYixhQUFXLEtBQUssQUFBQyxDQUFDLElBQUcsQ0FBQyxDQUFDO0FBQ3ZCLEtBQUcsTUFBTSxFQUFJLEtBQUcsQ0FBQztBQUNqQixLQUFHLFFBQVEsRUFBSSxLQUFHLENBQUM7QUFDbkIsS0FBRyxvQkFBb0IsSUFBSSxBQUFDLENBQUMsU0FBUSxDQUFDLENBQUM7QUFDM0M7QUFBQSxBQUVBLEdBQUcsU0FBUyxBQUFDLENBQUMsS0FBSSxDQUFHLGFBQVcsQ0FBQyxDQUFDO0FBRWxDLEtBQUssaUJBQWlCLEFBQUMsQ0FBQyxLQUFJLFVBQVUsQ0FBRyxFQUNyQyxhQUFZLENBQUc7QUFDWCxRQUFJLENBQUcsS0FBRztBQUNWLGFBQVMsQ0FBRyxNQUFJO0FBQUEsRUFDcEIsQ0FDSixDQUFDLENBQUM7QUFFRixJQUFJLFVBQVUsT0FBTyxFQUFJLFVBQVUsV0FBVSxDQUFHO0FBQzVDLFlBQVUsU0FBUyxBQUFDLENBQUMsQ0FBQyxJQUFHLE1BQU0sQ0FBRyxDQUFBLElBQUcsUUFBUSxDQUFDLENBQUcsV0FBUyxDQUFDLENBQUM7QUFDaEUsQ0FBQztBQUVELElBQUksVUFBVSxTQUFTLEVBQUksVUFBVSxXQUFVLENBQUcsQ0FBQSxNQUFLLENBQUcsQ0FBQSxNQUFLLENBQUc7QUFDOUQsS0FBSSxNQUFLLElBQU0sQ0FBQSxRQUFPLE9BQU8sU0FBUyxDQUFHO0FBQ3JDLGNBQVUsU0FBUyxRQUFRLEtBQUssQUFBQyxDQUFDLElBQUcsQ0FBRyxZQUFVLENBQUcsQ0FBQSxNQUFLLENBQUUsQ0FBQSxDQUFDLENBQUcsQ0FBQSxNQUFLLENBQUUsQ0FBQSxDQUFDLEdBQUssR0FBQyxDQUFDLENBQUM7RUFDcEYsS0FDSztBQUNELGNBQVUsSUFBSSxBQUFDLENBQUMsTUFBSyxDQUFHLE9BQUssQ0FBQyxDQUFDO0VBQ25DO0FBQUEsQUFDSixDQUFDO0FBRUQsSUFBSSxVQUFVLFFBQVEsRUFBSSxVQUFTLFdBQVUsQ0FBRyxDQUFBLEtBQUksQ0FBRyxDQUFBLE9BQU0sQ0FBRztBQUM1RCxZQUFVLEtBQUssQUFBQyxDQUFDLEdBQUksTUFBSSxBQUFDLENBQUMsa0JBQWlCLENBQUMsQ0FBQyxDQUFDO0FBQ25ELENBQUM7QUFFRCxLQUFLLFFBQVEsRUFBSSxNQUFJLENBQUM7QUFDdEIiLCJmaWxlIjoiYWN0aXZpdGllcy9xdWVyeS5qcyIsInNvdXJjZVJvb3QiOiJsaWIvZXM2Iiwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XHJcblxyXG5sZXQgd2Y0bm9kZSA9IHJlcXVpcmUoXCJ3b3JrZmxvdy00LW5vZGVcIik7XHJcbmxldCBDb2xsZWN0aW9uT3AgPSByZXF1aXJlKFwiLi9jb2xsZWN0aW9uT3BcIik7XHJcbmxldCB1dGlsID0gcmVxdWlyZShcInV0aWxcIik7XHJcbmxldCBBY3Rpdml0eSA9IHdmNG5vZGUuYWN0aXZpdGllcy5BY3Rpdml0eTtcclxuXHJcbmZ1bmN0aW9uIFF1ZXJ5KCkge1xyXG4gICAgQ29sbGVjdGlvbk9wLmNhbGwodGhpcyk7XHJcbiAgICB0aGlzLnF1ZXJ5ID0gbnVsbDtcclxuICAgIHRoaXMub3B0aW9ucyA9IG51bGw7XHJcbiAgICB0aGlzLm5vblNjb3BlZFByb3BlcnRpZXMuYWRkKFwiZG9RdWVyeVwiKTtcclxufVxyXG5cclxudXRpbC5pbmhlcml0cyhRdWVyeSwgQ29sbGVjdGlvbk9wKTtcclxuXHJcbk9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKFF1ZXJ5LnByb3RvdHlwZSwge1xyXG4gICAgY29sbGVjdGlvbmlmeToge1xyXG4gICAgICAgIHZhbHVlOiB0cnVlLFxyXG4gICAgICAgIGVudW1lcmFibGU6IGZhbHNlXHJcbiAgICB9XHJcbn0pO1xyXG5cclxuUXVlcnkucHJvdG90eXBlLmRvV29yayA9IGZ1bmN0aW9uIChjYWxsQ29udGV4dCkge1xyXG4gICAgY2FsbENvbnRleHQuc2NoZWR1bGUoW3RoaXMucXVlcnksIHRoaXMub3B0aW9uc10sIFwiX3BhcnNHb3RcIik7XHJcbn07XHJcblxyXG5RdWVyeS5wcm90b3R5cGUuX3BhcnNHb3QgPSBmdW5jdGlvbiAoY2FsbENvbnRleHQsIHJlYXNvbiwgcmVzdWx0KSB7XHJcbiAgICBpZiAocmVhc29uID09PSBBY3Rpdml0eS5zdGF0ZXMuY29tcGxldGUpIHtcclxuICAgICAgICBjYWxsQ29udGV4dC5hY3Rpdml0eS5kb1F1ZXJ5LmNhbGwodGhpcywgY2FsbENvbnRleHQsIHJlc3VsdFswXSwgcmVzdWx0WzFdIHx8IHt9KTtcclxuICAgIH1cclxuICAgIGVsc2Uge1xyXG4gICAgICAgIGNhbGxDb250ZXh0LmVuZChyZWFzb24sIHJlc3VsdCk7XHJcbiAgICB9XHJcbn07XHJcblxyXG5RdWVyeS5wcm90b3R5cGUuZG9RdWVyeSA9IGZ1bmN0aW9uKGNhbGxDb250ZXh0LCBxdWVyeSwgb3B0aW9ucykge1xyXG4gICAgY2FsbENvbnRleHQuZmFpbChuZXcgRXJyb3IoXCJOb3QgaW1wbGVtZW50ZWQhXCIpKTtcclxufTtcclxuXHJcbm1vZHVsZS5leHBvcnRzID0gUXVlcnk7XHJcbiJdfQ==
