"use strict";
var MapReduceBase = require('./mapReduceBase');
var util = require('util');
function InlineMR() {
  MapReduceBase.call(this);
}
util.inherits(InlineMR, MapReduceBase);
InlineMR.prototype.doReduce = function(callContext, options) {
  var coll = callContext.activity.getCollection(this);
  options.out.inline = 1;
  coll.mapReduce(this.map, this.reduce, options, function(err, result) {
    if (err) {
      callContext.fail(err);
    } else {
      callContext.complete(result);
    }
  });
};
module.exports = InlineMR;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImlubGluZU1SLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0FBQUEsQUFBSSxFQUFBLENBQUEsYUFBWSxFQUFJLENBQUEsT0FBTSxBQUFDLENBQUMsaUJBQWdCLENBQUMsQ0FBQztBQUM5QyxBQUFJLEVBQUEsQ0FBQSxJQUFHLEVBQUksQ0FBQSxPQUFNLEFBQUMsQ0FBQyxNQUFLLENBQUMsQ0FBQztBQUUxQixPQUFTLFNBQU8sQ0FBRSxBQUFELENBQUc7QUFDaEIsY0FBWSxLQUFLLEFBQUMsQ0FBQyxJQUFHLENBQUMsQ0FBQztBQUM1QjtBQUFBLEFBRUEsR0FBRyxTQUFTLEFBQUMsQ0FBQyxRQUFPLENBQUcsY0FBWSxDQUFDLENBQUM7QUFFdEMsT0FBTyxVQUFVLFNBQVMsRUFBSSxVQUFTLFdBQVUsQ0FBRyxDQUFBLE9BQU0sQ0FBRztBQUN6RCxBQUFJLElBQUEsQ0FBQSxJQUFHLEVBQUksQ0FBQSxXQUFVLFNBQVMsY0FBYyxBQUFDLENBQUMsSUFBRyxDQUFDLENBQUM7QUFDbkQsUUFBTSxJQUFJLE9BQU8sRUFBSSxFQUFBLENBQUM7QUFDdEIsS0FBRyxVQUFVLEFBQUMsQ0FBQyxJQUFHLElBQUksQ0FBRyxDQUFBLElBQUcsT0FBTyxDQUFHLFFBQU0sQ0FBRyxVQUFTLEdBQUUsQ0FBRyxDQUFBLE1BQUssQ0FBRztBQUNqRSxPQUFJLEdBQUUsQ0FBRztBQUNMLGdCQUFVLEtBQUssQUFBQyxDQUFDLEdBQUUsQ0FBQyxDQUFDO0lBQ3pCLEtBQ0s7QUFDRCxnQkFBVSxTQUFTLEFBQUMsQ0FBQyxNQUFLLENBQUMsQ0FBQztJQUNoQztBQUFBLEVBQ0osQ0FBQyxDQUFDO0FBQ04sQ0FBQTtBQUVBLEtBQUssUUFBUSxFQUFJLFNBQU8sQ0FBQztBQUN6QiIsImZpbGUiOiJhY3Rpdml0aWVzL2lubGluZU1SLmpzIiwic291cmNlUm9vdCI6IkM6L0dJVC9tb25nby1jcnVuY2gvbGliLyIsInNvdXJjZXNDb250ZW50IjpbInZhciBNYXBSZWR1Y2VCYXNlID0gcmVxdWlyZSgnLi9tYXBSZWR1Y2VCYXNlJyk7XHJcbnZhciB1dGlsID0gcmVxdWlyZSgndXRpbCcpO1xyXG5cclxuZnVuY3Rpb24gSW5saW5lTVIoKSB7XHJcbiAgICBNYXBSZWR1Y2VCYXNlLmNhbGwodGhpcyk7XHJcbn1cclxuXHJcbnV0aWwuaW5oZXJpdHMoSW5saW5lTVIsIE1hcFJlZHVjZUJhc2UpO1xyXG5cclxuSW5saW5lTVIucHJvdG90eXBlLmRvUmVkdWNlID0gZnVuY3Rpb24oY2FsbENvbnRleHQsIG9wdGlvbnMpIHtcclxuICAgIHZhciBjb2xsID0gY2FsbENvbnRleHQuYWN0aXZpdHkuZ2V0Q29sbGVjdGlvbih0aGlzKTtcclxuICAgIG9wdGlvbnMub3V0LmlubGluZSA9IDE7XHJcbiAgICBjb2xsLm1hcFJlZHVjZSh0aGlzLm1hcCwgdGhpcy5yZWR1Y2UsIG9wdGlvbnMsIGZ1bmN0aW9uKGVyciwgcmVzdWx0KSB7XHJcbiAgICAgICAgaWYgKGVycikge1xyXG4gICAgICAgICAgICBjYWxsQ29udGV4dC5mYWlsKGVycik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBjYWxsQ29udGV4dC5jb21wbGV0ZShyZXN1bHQpO1xyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG59XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IElubGluZU1SO1xyXG4iXX0=
