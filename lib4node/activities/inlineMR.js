"use strict";
"use strict";
var MapReduceBase = require('./mapReduceBase');
var util = require('util');
function InlineMR() {
  MapReduceBase.call(this);
}
util.inherits(InlineMR, MapReduceBase);
InlineMR.prototype.doReduce = function(callContext, options) {
  var coll = callContext.activity.getCollection(this);
  options.out.inline = 1;
  coll.mapReduce(this.map, this.reduce, options, function(err, result) {
    if (err) {
      callContext.fail(err);
    } else {
      callContext.complete(result);
    }
  });
};
module.exports = InlineMR;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImlubGluZU1SLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0FBQUEsV0FBVyxDQUFDO0FBRVosQUFBSSxFQUFBLENBQUEsYUFBWSxFQUFJLENBQUEsT0FBTSxBQUFDLENBQUMsaUJBQWdCLENBQUMsQ0FBQztBQUM5QyxBQUFJLEVBQUEsQ0FBQSxJQUFHLEVBQUksQ0FBQSxPQUFNLEFBQUMsQ0FBQyxNQUFLLENBQUMsQ0FBQztBQUUxQixPQUFTLFNBQU8sQ0FBRSxBQUFELENBQUc7QUFDaEIsY0FBWSxLQUFLLEFBQUMsQ0FBQyxJQUFHLENBQUMsQ0FBQztBQUM1QjtBQUFBLEFBRUEsR0FBRyxTQUFTLEFBQUMsQ0FBQyxRQUFPLENBQUcsY0FBWSxDQUFDLENBQUM7QUFFdEMsT0FBTyxVQUFVLFNBQVMsRUFBSSxVQUFTLFdBQVUsQ0FBRyxDQUFBLE9BQU0sQ0FBRztBQUN6RCxBQUFJLElBQUEsQ0FBQSxJQUFHLEVBQUksQ0FBQSxXQUFVLFNBQVMsY0FBYyxBQUFDLENBQUMsSUFBRyxDQUFDLENBQUM7QUFDbkQsUUFBTSxJQUFJLE9BQU8sRUFBSSxFQUFBLENBQUM7QUFDdEIsS0FBRyxVQUFVLEFBQUMsQ0FBQyxJQUFHLElBQUksQ0FBRyxDQUFBLElBQUcsT0FBTyxDQUFHLFFBQU0sQ0FBRyxVQUFTLEdBQUUsQ0FBRyxDQUFBLE1BQUssQ0FBRztBQUNqRSxPQUFJLEdBQUUsQ0FBRztBQUNMLGdCQUFVLEtBQUssQUFBQyxDQUFDLEdBQUUsQ0FBQyxDQUFDO0lBQ3pCLEtBQ0s7QUFDRCxnQkFBVSxTQUFTLEFBQUMsQ0FBQyxNQUFLLENBQUMsQ0FBQztJQUNoQztBQUFBLEVBQ0osQ0FBQyxDQUFDO0FBQ04sQ0FBQTtBQUVBLEtBQUssUUFBUSxFQUFJLFNBQU8sQ0FBQztBQUN6QiIsImZpbGUiOiJhY3Rpdml0aWVzL2lubGluZU1SLmpzIiwic291cmNlUm9vdCI6IkM6L0dJVC9tb25nby1jcnVuY2gvbGliLyIsInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xyXG5cclxubGV0IE1hcFJlZHVjZUJhc2UgPSByZXF1aXJlKCcuL21hcFJlZHVjZUJhc2UnKTtcclxubGV0IHV0aWwgPSByZXF1aXJlKCd1dGlsJyk7XHJcblxyXG5mdW5jdGlvbiBJbmxpbmVNUigpIHtcclxuICAgIE1hcFJlZHVjZUJhc2UuY2FsbCh0aGlzKTtcclxufVxyXG5cclxudXRpbC5pbmhlcml0cyhJbmxpbmVNUiwgTWFwUmVkdWNlQmFzZSk7XHJcblxyXG5JbmxpbmVNUi5wcm90b3R5cGUuZG9SZWR1Y2UgPSBmdW5jdGlvbihjYWxsQ29udGV4dCwgb3B0aW9ucykge1xyXG4gICAgbGV0IGNvbGwgPSBjYWxsQ29udGV4dC5hY3Rpdml0eS5nZXRDb2xsZWN0aW9uKHRoaXMpO1xyXG4gICAgb3B0aW9ucy5vdXQuaW5saW5lID0gMTtcclxuICAgIGNvbGwubWFwUmVkdWNlKHRoaXMubWFwLCB0aGlzLnJlZHVjZSwgb3B0aW9ucywgZnVuY3Rpb24oZXJyLCByZXN1bHQpIHtcclxuICAgICAgICBpZiAoZXJyKSB7XHJcbiAgICAgICAgICAgIGNhbGxDb250ZXh0LmZhaWwoZXJyKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIGNhbGxDb250ZXh0LmNvbXBsZXRlKHJlc3VsdCk7XHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcbn1cclxuXHJcbm1vZHVsZS5leHBvcnRzID0gSW5saW5lTVI7XHJcbiJdfQ==
