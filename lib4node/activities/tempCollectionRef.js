"use strict";
"use strict";
var util = require("util");
var Composite = require("../../deps/workflow-4-node").activities.Composite;
var Guid = require("guid");
var path = require("path");
function TempCollectionRef() {
  Composite.call(this);
  this.namePrefix = null;
  this.deleteOnExit = true;
  this.indexes = null;
  this.clearBeforeUse = true;
}
util.inherits(TempCollectionRef, Composite);
TempCollectionRef.prototype.createImplementation = function() {
  var name = this.namePrefix;
  name = name ? name + "_tmp_" : "tmp_";
  name += Guid.create().toString();
  return {
    "@require": path.join(__dirname, "collectionRef"),
    collectionRef: {
      name: name,
      indexes: this.indexes,
      clearBeforeUse: this.clearBeforeUse,
      deleteOnExit: this.deleteOnExit,
      mustExists: false
    }
  };
};
module.exports = TempCollectionRef;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInRlbXBDb2xsZWN0aW9uUmVmLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0FBQUEsV0FBVyxDQUFDO0FBRVosQUFBSSxFQUFBLENBQUEsSUFBRyxFQUFJLENBQUEsT0FBTSxBQUFDLENBQUMsTUFBSyxDQUFDLENBQUM7QUFDMUIsQUFBSSxFQUFBLENBQUEsU0FBUSxFQUFJLENBQUEsT0FBTSxBQUFDLENBQUMsNEJBQTJCLENBQUMsV0FBVyxVQUFVLENBQUM7QUFDMUUsQUFBSSxFQUFBLENBQUEsSUFBRyxFQUFJLENBQUEsT0FBTSxBQUFDLENBQUMsTUFBSyxDQUFDLENBQUM7QUFDMUIsQUFBSSxFQUFBLENBQUEsSUFBRyxFQUFJLENBQUEsT0FBTSxBQUFDLENBQUMsTUFBSyxDQUFDLENBQUM7QUFFMUIsT0FBUyxrQkFBZ0IsQ0FBRSxBQUFELENBQUc7QUFDekIsVUFBUSxLQUFLLEFBQUMsQ0FBQyxJQUFHLENBQUMsQ0FBQztBQUVwQixLQUFHLFdBQVcsRUFBSSxLQUFHLENBQUM7QUFDdEIsS0FBRyxhQUFhLEVBQUksS0FBRyxDQUFDO0FBQ3hCLEtBQUcsUUFBUSxFQUFJLEtBQUcsQ0FBQztBQUNuQixLQUFHLGVBQWUsRUFBSSxLQUFHLENBQUM7QUFDOUI7QUFBQSxBQUVBLEdBQUcsU0FBUyxBQUFDLENBQUMsaUJBQWdCLENBQUcsVUFBUSxDQUFDLENBQUM7QUFFM0MsZ0JBQWdCLFVBQVUscUJBQXFCLEVBQUksVUFBUyxBQUFELENBQUc7QUFDMUQsQUFBSSxJQUFBLENBQUEsSUFBRyxFQUFJLENBQUEsSUFBRyxXQUFXLENBQUM7QUFDMUIsS0FBRyxFQUFJLENBQUEsSUFBRyxFQUFJLENBQUEsSUFBRyxFQUFJLFFBQU0sQ0FBQSxDQUFJLE9BQUssQ0FBQztBQUNyQyxLQUFHLEdBQUssQ0FBQSxJQUFHLE9BQU8sQUFBQyxFQUFDLFNBQVMsQUFBQyxFQUFDLENBQUM7QUFFaEMsT0FBTztBQUNILGFBQVMsQ0FBRyxDQUFBLElBQUcsS0FBSyxBQUFDLENBQUMsU0FBUSxDQUFHLGdCQUFjLENBQUM7QUFDaEQsZ0JBQVksQ0FBRztBQUNYLFNBQUcsQ0FBRyxLQUFHO0FBQ1QsWUFBTSxDQUFHLENBQUEsSUFBRyxRQUFRO0FBQ3BCLG1CQUFhLENBQUcsQ0FBQSxJQUFHLGVBQWU7QUFDbEMsaUJBQVcsQ0FBRyxDQUFBLElBQUcsYUFBYTtBQUM5QixlQUFTLENBQUcsTUFBSTtBQUFBLElBQ3BCO0FBQUEsRUFDSixDQUFDO0FBQ0wsQ0FBQztBQUVELEtBQUssUUFBUSxFQUFJLGtCQUFnQixDQUFDO0FBQUEiLCJmaWxlIjoiYWN0aXZpdGllcy90ZW1wQ29sbGVjdGlvblJlZi5qcyIsInNvdXJjZVJvb3QiOiJDOi9HSVQvbW9uZ28tY3J1bmNoL2xpYi8iLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcclxuXHJcbmxldCB1dGlsID0gcmVxdWlyZShcInV0aWxcIik7XHJcbmxldCBDb21wb3NpdGUgPSByZXF1aXJlKFwiLi4vLi4vZGVwcy93b3JrZmxvdy00LW5vZGVcIikuYWN0aXZpdGllcy5Db21wb3NpdGU7XHJcbmxldCBHdWlkID0gcmVxdWlyZShcImd1aWRcIik7XHJcbmxldCBwYXRoID0gcmVxdWlyZShcInBhdGhcIik7XHJcblxyXG5mdW5jdGlvbiBUZW1wQ29sbGVjdGlvblJlZigpIHtcclxuICAgIENvbXBvc2l0ZS5jYWxsKHRoaXMpO1xyXG5cclxuICAgIHRoaXMubmFtZVByZWZpeCA9IG51bGw7XHJcbiAgICB0aGlzLmRlbGV0ZU9uRXhpdCA9IHRydWU7XHJcbiAgICB0aGlzLmluZGV4ZXMgPSBudWxsO1xyXG4gICAgdGhpcy5jbGVhckJlZm9yZVVzZSA9IHRydWU7XHJcbn1cclxuXHJcbnV0aWwuaW5oZXJpdHMoVGVtcENvbGxlY3Rpb25SZWYsIENvbXBvc2l0ZSk7XHJcblxyXG5UZW1wQ29sbGVjdGlvblJlZi5wcm90b3R5cGUuY3JlYXRlSW1wbGVtZW50YXRpb24gPSBmdW5jdGlvbigpIHtcclxuICAgIGxldCBuYW1lID0gdGhpcy5uYW1lUHJlZml4O1xyXG4gICAgbmFtZSA9IG5hbWUgPyBuYW1lICsgXCJfdG1wX1wiIDogXCJ0bXBfXCI7XHJcbiAgICBuYW1lICs9IEd1aWQuY3JlYXRlKCkudG9TdHJpbmcoKTtcclxuXHJcbiAgICByZXR1cm4ge1xyXG4gICAgICAgIFwiQHJlcXVpcmVcIjogcGF0aC5qb2luKF9fZGlybmFtZSwgXCJjb2xsZWN0aW9uUmVmXCIpLFxyXG4gICAgICAgIGNvbGxlY3Rpb25SZWY6IHtcclxuICAgICAgICAgICAgbmFtZTogbmFtZSxcclxuICAgICAgICAgICAgaW5kZXhlczogdGhpcy5pbmRleGVzLFxyXG4gICAgICAgICAgICBjbGVhckJlZm9yZVVzZTogdGhpcy5jbGVhckJlZm9yZVVzZSxcclxuICAgICAgICAgICAgZGVsZXRlT25FeGl0OiB0aGlzLmRlbGV0ZU9uRXhpdCxcclxuICAgICAgICAgICAgbXVzdEV4aXN0czogZmFsc2VcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG59O1xyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBUZW1wQ29sbGVjdGlvblJlZjsiXX0=
