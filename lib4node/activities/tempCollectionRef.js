"use strict";
var util = require("util");
var Composite = require("../../deps/workflow-4-node").activities.Composite;
var Guid = require("guid");
var path = require("path");
function TempCollectionRef() {
  Composite.call(this);
  this.namePrefix = null;
  this.deleteOnExit = true;
  this.indexes = null;
  this.clearBeforeUse = true;
}
util.inherits(TempCollectionRef, Composite);
TempCollectionRef.prototype.createImplementation = function() {
  var name = this.namePrefix;
  name = name ? name + "_tmp_" : "tmp_";
  name += Guid.create().toString();
  return {
    "@require": path.join(__dirname, "collectionRef"),
    collectionRef: {
      name: name,
      indexes: this.indexes,
      clearBeforeUse: this.clearBeforeUse,
      deleteOnExit: this.deleteOnExit,
      mustExists: false
    }
  };
};
module.exports = TempCollectionRef;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInRlbXBDb2xsZWN0aW9uUmVmLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0FBQUEsQUFBSSxFQUFBLENBQUEsSUFBRyxFQUFJLENBQUEsT0FBTSxBQUFDLENBQUMsTUFBSyxDQUFDLENBQUM7QUFDMUIsQUFBSSxFQUFBLENBQUEsU0FBUSxFQUFJLENBQUEsT0FBTSxBQUFDLENBQUMsNEJBQTJCLENBQUMsV0FBVyxVQUFVLENBQUM7QUFDMUUsQUFBSSxFQUFBLENBQUEsSUFBRyxFQUFJLENBQUEsT0FBTSxBQUFDLENBQUMsTUFBSyxDQUFDLENBQUM7QUFDMUIsQUFBSSxFQUFBLENBQUEsSUFBRyxFQUFJLENBQUEsT0FBTSxBQUFDLENBQUMsTUFBSyxDQUFDLENBQUM7QUFFMUIsT0FBUyxrQkFBZ0IsQ0FBRSxBQUFELENBQUc7QUFDekIsVUFBUSxLQUFLLEFBQUMsQ0FBQyxJQUFHLENBQUMsQ0FBQztBQUVwQixLQUFHLFdBQVcsRUFBSSxLQUFHLENBQUM7QUFDdEIsS0FBRyxhQUFhLEVBQUksS0FBRyxDQUFDO0FBQ3hCLEtBQUcsUUFBUSxFQUFJLEtBQUcsQ0FBQztBQUNuQixLQUFHLGVBQWUsRUFBSSxLQUFHLENBQUM7QUFDOUI7QUFBQSxBQUVBLEdBQUcsU0FBUyxBQUFDLENBQUMsaUJBQWdCLENBQUcsVUFBUSxDQUFDLENBQUM7QUFFM0MsZ0JBQWdCLFVBQVUscUJBQXFCLEVBQUksVUFBUyxBQUFELENBQUc7QUFDMUQsQUFBSSxJQUFBLENBQUEsSUFBRyxFQUFJLENBQUEsSUFBRyxXQUFXLENBQUM7QUFDMUIsS0FBRyxFQUFJLENBQUEsSUFBRyxFQUFJLENBQUEsSUFBRyxFQUFJLFFBQU0sQ0FBQSxDQUFJLE9BQUssQ0FBQztBQUNyQyxLQUFHLEdBQUssQ0FBQSxJQUFHLE9BQU8sQUFBQyxFQUFDLFNBQVMsQUFBQyxFQUFDLENBQUM7QUFFaEMsT0FBTztBQUNILGFBQVMsQ0FBRyxDQUFBLElBQUcsS0FBSyxBQUFDLENBQUMsU0FBUSxDQUFHLGdCQUFjLENBQUM7QUFDaEQsZ0JBQVksQ0FBRztBQUNYLFNBQUcsQ0FBRyxLQUFHO0FBQ1QsWUFBTSxDQUFHLENBQUEsSUFBRyxRQUFRO0FBQ3BCLG1CQUFhLENBQUcsQ0FBQSxJQUFHLGVBQWU7QUFDbEMsaUJBQVcsQ0FBRyxDQUFBLElBQUcsYUFBYTtBQUM5QixlQUFTLENBQUcsTUFBSTtBQUFBLElBQ3BCO0FBQUEsRUFDSixDQUFDO0FBQ0wsQ0FBQztBQUVELEtBQUssUUFBUSxFQUFJLGtCQUFnQixDQUFDO0FBQUEiLCJmaWxlIjoiYWN0aXZpdGllcy90ZW1wQ29sbGVjdGlvblJlZi5qcyIsInNvdXJjZVJvb3QiOiJDOi9HSVQvbW9uZ28tY3J1bmNoL2xpYi8iLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIgdXRpbCA9IHJlcXVpcmUoXCJ1dGlsXCIpO1xyXG52YXIgQ29tcG9zaXRlID0gcmVxdWlyZShcIi4uLy4uL2RlcHMvd29ya2Zsb3ctNC1ub2RlXCIpLmFjdGl2aXRpZXMuQ29tcG9zaXRlO1xyXG52YXIgR3VpZCA9IHJlcXVpcmUoXCJndWlkXCIpO1xyXG52YXIgcGF0aCA9IHJlcXVpcmUoXCJwYXRoXCIpO1xyXG5cclxuZnVuY3Rpb24gVGVtcENvbGxlY3Rpb25SZWYoKSB7XHJcbiAgICBDb21wb3NpdGUuY2FsbCh0aGlzKTtcclxuXHJcbiAgICB0aGlzLm5hbWVQcmVmaXggPSBudWxsO1xyXG4gICAgdGhpcy5kZWxldGVPbkV4aXQgPSB0cnVlO1xyXG4gICAgdGhpcy5pbmRleGVzID0gbnVsbDtcclxuICAgIHRoaXMuY2xlYXJCZWZvcmVVc2UgPSB0cnVlO1xyXG59XHJcblxyXG51dGlsLmluaGVyaXRzKFRlbXBDb2xsZWN0aW9uUmVmLCBDb21wb3NpdGUpO1xyXG5cclxuVGVtcENvbGxlY3Rpb25SZWYucHJvdG90eXBlLmNyZWF0ZUltcGxlbWVudGF0aW9uID0gZnVuY3Rpb24oKSB7XHJcbiAgICB2YXIgbmFtZSA9IHRoaXMubmFtZVByZWZpeDtcclxuICAgIG5hbWUgPSBuYW1lID8gbmFtZSArIFwiX3RtcF9cIiA6IFwidG1wX1wiO1xyXG4gICAgbmFtZSArPSBHdWlkLmNyZWF0ZSgpLnRvU3RyaW5nKCk7XHJcblxyXG4gICAgcmV0dXJuIHtcclxuICAgICAgICBcIkByZXF1aXJlXCI6IHBhdGguam9pbihfX2Rpcm5hbWUsIFwiY29sbGVjdGlvblJlZlwiKSxcclxuICAgICAgICBjb2xsZWN0aW9uUmVmOiB7XHJcbiAgICAgICAgICAgIG5hbWU6IG5hbWUsXHJcbiAgICAgICAgICAgIGluZGV4ZXM6IHRoaXMuaW5kZXhlcyxcclxuICAgICAgICAgICAgY2xlYXJCZWZvcmVVc2U6IHRoaXMuY2xlYXJCZWZvcmVVc2UsXHJcbiAgICAgICAgICAgIGRlbGV0ZU9uRXhpdDogdGhpcy5kZWxldGVPbkV4aXQsXHJcbiAgICAgICAgICAgIG11c3RFeGlzdHM6IGZhbHNlXHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxufTtcclxuXHJcbm1vZHVsZS5leHBvcnRzID0gVGVtcENvbGxlY3Rpb25SZWY7Il19
